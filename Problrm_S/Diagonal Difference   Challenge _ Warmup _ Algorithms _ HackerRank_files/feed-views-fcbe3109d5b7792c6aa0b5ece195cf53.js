!function(a,b,c){"use strict";function d(a,b){this._defaults=e,this.element=a,this.setOptions(b),this.init()}var e={tagName:"a",newLine:"\n",target:"_blank",linkClass:null,linkClasses:[],linkAttributes:null};d.prototype={constructor:d,init:function(){1===this.element.nodeType?d.linkifyNode.call(this,this.element):this.element=d.linkify.call(this,this.element.toString())},setOptions:function(a){this.settings=d.extendSettings(a,this.settings)},toString:function(){return this.element.toString()}},d.extendSettings=function(a,b){var c;b=b||{};for(c in e)b[c]||(b[c]=e[c]);for(c in a)b[c]=a[c];return b},d.linkMatch=new RegExp(["(",'\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^',")(?:","(","[a-zA-Z0-9\\+_\\-]+","(?:","\\.[a-zA-Z0-9\\+_\\-]+",")*@",")?(","http:\\/\\/|https:\\/\\/|ftp:\\/\\/",")?(","(?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+)",")(","(?:com|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2})",")(","(?::\\d{1,5})",")?(","(?:","[\\/|\\?]","(?:","[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/]*",")*",")","[\\-\\/a-zA-Z0-9_%#*&+=~]","|","\\/?",")?",")(",'[^a-zA-Z0-9\\+_\\/"\\<\\-]|$',")"].join(""),"g"),d.emailLinkMatch=/(<[a-z]+ href=\")(http:\/\/)([a-zA-Z0-9\+_\-]+(?:\.[a-zA-Z0-9\+_\-]+)*@)/g,d.linkify=function(a,b){var c,e,f,g=[];this.constructor===d&&this.settings?(e=this.settings,b&&(e=d.extendSettings(b,e))):e=d.extendSettings(b),f=e.linkClass?e.linkClass.split(/\s+/):[],f.push.apply(f,e.linkClasses),a=a.replace(/</g,"&lt;").replace(/(\s)/g,"$1$1"),g.push("$1<"+e.tagName,'href="http://$2$4$5$6$7"'),g.push('class="linkified'+(f.length>0?" "+f.join(" "):"")+'"'),e.target&&g.push('target="'+e.target+'"');for(c in e.linkAttributes)g.push([c,'="',e.linkAttributes[c].replace(/\"/g,"&quot;").replace(/\$/g,"&#36;"),'"'].join(""));return g.push(">$2$3$4$5$6$7</"+e.tagName+">$8"),a=a.replace(d.linkMatch,g.join(" ")),a=a.replace(d.emailLinkMatch,"$1mailto:$3"),a=a.replace(/(\s){2}/g,"$1"),a=a.replace(/\n/g,e.newLine)},d.linkifyNode=function(a){var b,e,f,g,h;if(a&&"object"==typeof a&&1===a.nodeType&&"a"!==a.tagName.toLowerCase()&&!/[^\s]linkified[\s$]/.test(a.className)){for(b=[],g=d._dummyElement||c.createElement("div"),e=a.firstChild,f=a.childElementCount;e;){if(3===e.nodeType){for(;g.firstChild;)g.removeChild(g.firstChild);for(g.innerHTML=d.linkify.call(this,e.textContent||e.innerText||e.nodeValue),b.push.apply(b,g.childNodes);g.firstChild;)g.removeChild(g.firstChild)}else b.push(1===e.nodeType?d.linkifyNode.call(this,e):e);e=e.nextSibling}for(;a.firstChild;)a.removeChild(a.firstChild);for(h=0;h<b.length;h++)a.appendChild(b[h])}return a},d._dummyElement=c.createElement("div"),a.fn.linkify=function(b){return this.each(function(){var c;(c=a.data(this,"plugin-linkify"))?(c.setOptions(b),c.init()):a.data(this,"plugin-linkify",new d(this,b))})},a.fn.linkify.Constructor=d,a(b).on("load",function(){a("[data-linkify]").each(function(){var b,c=a(this),d=c.attr("data-linkify"),e={tagName:c.attr("data-linkify-tagname"),newLine:c.attr("data-linkify-newline"),target:c.attr("data-linkify-target"),linkClass:c.attr("data-linkify-linkclass")};for(var f in e)"undefined"==typeof e[f]&&delete e[f];b="this"===d?c:c.find(d),b.linkify(e)})}),a("body").on("click",".linkified",function(){var c=a(this),d=c.attr("href"),e=/^mailto:/i.test(d),f=c.attr("target");return e?b.location.href=d:b.open(d,f),!1})}(jQuery,window,document),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FullScreenView,HR;return FullScreenView=function(superClass){function FullScreenView(){return FullScreenView.__super__.constructor.apply(this,arguments)}return extend(FullScreenView,superClass),FullScreenView.prototype.el="body",FullScreenView.prototype.template="fullscreen",FullScreenView.prototype.initialize=function(options){return this.profile=HR.profile(),this.parent=options.parent,this.template_view=options.templateView,null!=this.parent&&(this.template_view=this.parent.parent.parent),this.feedFullScreenMode=options.feedFullScreenMode},FullScreenView.prototype.render=function(){var classes,set_height,that;return that=this,classes="",this.feedFullScreenMode===!0&&(classes+="feed-fullscreen "),0===$(this.el).find("#fullscreen-wrapper").length&&$(this.el).append("<div id='fullscreen-wrapper' class='"+classes+"'></div>"),$(this.el).css("overflow-y","hidden"),$(this.el).find("#fullscreen-wrapper").show(),$(this.el).find("#fullscreen-wrapper").height($(window).height()).html(_.template('<div class="left-sidebar"> <div class="challenge-content"></div> </div> <div class="separator"></div> <div class="right-sidebar"> <div class="challenge-request"></div> <div class="challenge-response"></div> <div class="challenge-copyright"</div> </div> <div class="clearfix"></div>')({model:this.model.toJSON()})),this.$left_sidebar=$(this.el).find("#fullscreen-wrapper .left-sidebar"),this.$right_sidebar=$(this.el).find("#fullscreen-wrapper .right-sidebar"),this.$separator=$(this.el).find("#fullscreen-wrapper .separator"),set_height=function(_this){return function(){return _this.$left_sidebar.height($(window).height()),_this.$right_sidebar.height($(window).height()),_this.$separator.height($(window).height())}}(this),set_height(),$(window).resize(set_height),$(document).keyup(function(_this){return function(e){return $(".editor-mode-button.vim.disabled").length<1&&27===e.keyCode?_this.template_view.request_view.codeeditor.restoreFullscreen():void 0}}(this)),this.template_view.request_view.setFullScreenView(this),this.assign({".left-sidebar .challenge-content":this.template_view.content_view,".right-sidebar .challenge-request":this.template_view.request_view,".right-sidebar .challenge-response":this.template_view.response_view,".right-sidebar .challenge-copyright":this.template_view.copyright_view}),$("div.separator").dragResize({activeColor:"#AAA",inactiveColor:"#DDD",resize:function(pageX){var document_width,left_sidebar_width,left_sidebar_width_px,right_sidebar_width,right_sidebar_width_px,separator_width;return separator_width=7,document_width=$(window).width(),left_sidebar_width_px=pageX-3,right_sidebar_width_px=document_width-(left_sidebar_width_px+10),left_sidebar_width=100*(left_sidebar_width_px/document_width)+"%",right_sidebar_width=100*(right_sidebar_width_px/document_width)+"%",that.$left_sidebar.css("width",left_sidebar_width),that.$right_sidebar.css("width",right_sidebar_width),Backbone.trigger("fullScreenModeResize")}}),this},FullScreenView.prototype.unRender=function(){return $(this.el).css("overflow-y","visible"),$(this.el).find("#fullscreen-wrapper").length>0&&$(this.el).find("#fullscreen-wrapper").unbind().remove(),this.template_view.request_view.unSetFullScreenView(this),this.template_view.render()},FullScreenView}(window.HR.GenericView),HR=window.HR||{},HR.FullScreenView=FullScreenView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeExpertTextView,HR,ref;return ChallengeExpertTextView=function(superClass){function ChallengeExpertTextView(){return ChallengeExpertTextView.__super__.constructor.apply(this,arguments)}return extend(ChallengeExpertTextView,superClass),ChallengeExpertTextView.prototype.tagName="span",ChallengeExpertTextView.prototype.initialize=function(options){var date;return this.expert_data=options.expert_data,this.start_time=options.start_time,this.company_name=options.company_name,this.timezone=HR.util.timezone_abbr(),date=new Date(this.start_time),this.formatted_time=HR.util.toOrdinal(date.getDate())+" "+HR.util.date_getMonth(date)+" "+HR.util.formatAMPM(date)},ChallengeExpertTextView.prototype.render=function(){return this.$el.html("<p class='cta-support-text msB'> <a href='/"+this.expert_data.username+"' data-track-target='expert-username' data-track-value='"+this.expert_data.username+"'>"+this.expert_data.name+"</a>, "+this.expert_data.title+" at "+this.company_name+" will share the solution on <strong>"+this.formatted_time+" ("+this.timezone+")</strong> </p>"),this},ChallengeExpertTextView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.ChallengeExpertTextView=ChallengeExpertTextView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var CommentEndorseView,HR,ref;return CommentEndorseView=function(superClass){function CommentEndorseView(){return CommentEndorseView.__super__.constructor.apply(this,arguments)}return extend(CommentEndorseView,superClass),CommentEndorseView.prototype.tagName="span",CommentEndorseView.prototype.initialize=function(options){return this.challenge_slug=options.challenge_slug,this.contest_slug=options.contest_slug,this.comment_id=options.id,this.model=new HR.CommentModel({challenge_slug:this.challenge_slug,contest_slug:this.contest_slug,id:this.comment_id}),this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.model.cached()},CommentEndorseView.prototype.events={"click .js-endorse-btn":"endorse"},CommentEndorseView.prototype.endorse=function(e){return e.preventDefault(),this.model.appreciable()?this.model.get("appreciated")?this.model.appreciate(!1):this.model.appreciate(!0):void 0},CommentEndorseView.prototype.render=function(){return this.model.sync_status?(this.model.appreciable()&&!this.model.get("appreciated")?this.$el.html("<i class=\"js-endorse-btn endorse btn-endorse cursor icon-star-empty\"\ndata-track-target='cta2' data-track-value='endorse'>\n</i>"):this.$el.html("<i class=\"js-endorse-btn endorse btn-endorsed cursor icon-star-empty\"\ndata-track-target='cta2' data-track-value='unendorse'>\n</i>\ndata-track-target='cta2' data-track-value='endorse'"),this):this},CommentEndorseView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.CommentEndorseView=CommentEndorseView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ContestSignupView,HR,ref;return ContestSignupView=function(superClass){function ContestSignupView(){return ContestSignupView.__super__.constructor.apply(this,arguments)}return extend(ContestSignupView,superClass),ContestSignupView.prototype.tagName="span",ContestSignupView.prototype.initialize=function(options){return this.signedUp=options.hacker_signed_up,this.contest_slug=options.contest_slug,this.contest_ended=options.contest_ended},ContestSignupView.prototype.events={"click .sign-up-button":"signUpButtonClicked"},ContestSignupView.prototype.signUpButtonClicked=function(){return this.$(".sign-up-button").html("Signing up..."),this.$(".sign-up-button").attr("disabled","disabled"),$.ajax({type:"POST",beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},url:"/rest/contests/"+this.contest_slug+"/signup",data:{contest_crp:$.cookie(this.contest_slug+"_crp")},success:function(_this){return function(data){var html;return data.status?data.country_allowed?(html="<a class='btn btn-primary' href='/"+_this.contest_slug+"'>View Contest</a>",$(_this.el).html(html)):_this.resetButton():_this.resetButton()}}(this)})},ContestSignupView.prototype.resetButton=function(){return this.$(".sign-up-button").html("Sign Up"),this.$(".sign-up-button").removeAttr("disabled")},ContestSignupView.prototype.render=function(){var html;return html="",html=this.contest_ended?"<a class='btn btn-primary btn-flat' href='/"+this.contest_slug+"' data-track-target='cta1' data-track-value='practice_contest'> Practice</a>":this.signedUp?"<a class='btn btn-primary btn-flat' href='/"+this.contest_slug+"' data-track-target='cta1' data-track-value='view_contest'> View Contest</a>":this.custom_registration?"<a class='btn btn-primary btn-flat' href='/"+this.contest_slug+"' data-track-target='cta1' data-track-value='signup_contest'> Sign Up</a>":"<a class='btn btn-primary sign-up-button btn-flat' data-track-target='cta1' data-track-value='signup_contest'> Sign Up</a>",$(this.el).html(html),this},ContestSignupView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.ContestSignupView=ContestSignupView})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FeedCardView,HR,ref;return FeedCardView=function(superClass){function FeedCardView(){return this.setExpandElements=bind(this.setExpandElements,this),FeedCardView.__super__.constructor.apply(this,arguments)}return extend(FeedCardView,superClass),FeedCardView.prototype.template="feed/card",FeedCardView.prototype.initialize=function(options){return this.profile=options.profile,this.$feedMenuList=options.$feedMenuList,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render)},FeedCardView.prototype.events={"click *[data-track-target]":"trackClickEvent","click .expand-element-link":"expandElement"},FeedCardView.prototype.classMap={"CompanyFeed/company_expert_coding":"feed__company expert-solution","CompanyFeed/company_challenge":"feed__company new-challenge","CompanyFeed/company_regular":"feed__company new-post","DiscussionFeed/requested_expertise":"feed__discussion request-expertise","DiscussionFeed/expert_response":"feed__discussion expert-response","DiscussionFeed/direct_commented":"feed__discussion new-discussion-comment","DiscussionFeed/voted":"feed__discussion vote-on-comment","DiscussionFeed/participant_comment":"feed__discussion participating-comment","DiscussionFeed/general_comment":"feed__discussion participating-comment","ContestFeed/contest_upcoming_sponsored":"feed__contest upcoming-contest","ContestFeed/contest_upcoming_regular":"feed__contest upcoming-sponsored-contest","ContestFeed/contest_reminder":"feed__contest contest-reminder","ContestFeed/contest_results":"feed__contest contest-results","ProgressFeed/leaderboard_update":"feed__progress feed-leaderboard-update","McqFeed/mcq_related":"feed__mcqs","UserEducationFeed/user_education_clickthrough_card":"feed__user_education clickthrough_card"},FeedCardView.prototype.classMapPatterns={"^ChallengeFeed/.*":"feed__challenge"},FeedCardView.prototype.trackClickEvent=function(e){var $currentTarget,$itcContainer,$primary_entity,$view_thread_link,additional_attr,cardType,mixpanel_opts,redshift_opts,ref,ref1,type,value;return $currentTarget=$(e.currentTarget),type=$currentTarget.data("track-target"),value=$currentTarget.data("track-value"),cardType=this.model.get("card_type").split("/"),additional_attr={},additional_attr.reason=this.model.get("reason").substring(0,255),"ChallengeFeed"===cardType[0]&&($itcContainer=this.$el.find(".itc-container.itc-footer"),additional_attr.title=this.$el.find(".challenge").html(),additional_attr.track=null!=(ref=$itcContainer.find("*[data-track-target=alternate-cta1]").html())?ref.trim():void 0,additional_attr.chapter=null!=(ref1=$itcContainer.find("*[data-track-target=alternate-cta3]").html())?ref1.trim():void 0),("ChallengeFeed"===cardType[0]||"ContestFeed"===cardType[0]||"CompanyFeed"===cardType[0])&&($primary_entity=this.$el.find(".primary-heading a"),$primary_entity.length>0&&(additional_attr.primary_entity=$primary_entity.attr("href"))),"company_regular"===cardType[1]&&($primary_entity=this.$el.find(".reason-text a")[1],$primary_entity.length>0&&(additional_attr.primary_entity=$($primary_entity).attr("href"))),"DiscussionFeed"===cardType[0]&&($view_thread_link=this.$el.find(".secondary-cta"),$view_thread_link.length>0&&(additional_attr.primary_entity=$view_thread_link.attr("href"))),null==additional_attr.primary_entity&&($primary_entity=this.$el.find("primary_cta"),$primary_entity.length>0&&(additional_attr.primary_entity=$primary_entity.attr("href"))),mixpanel_opts=$.extend({},additional_attr,{card_type:cardType[0],card_sub_type:cardType[1],type:type,value:value,hacker_id:this.profile.id,feed_id:this.model.get("feed_id")}),hr_metrics.externalService("track","ClickedOnFeedCard",mixpanel_opts),redshift_opts=$.extend({},additional_attr,{attribute1:cardType[0],attribute2:cardType[1],attribute3:value,attribute7:this.model.get("feed_id")}),hr_metrics.track("HF-Click",type,redshift_opts)},FeedCardView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},FeedCardView.prototype.setExpandElements=function(){var feed_height,feed_max_height;return this.$(".max-size-content").length>0&&(feed_height=this.$(".max-size-content").prop("scrollHeight"),feed_max_height=this.$(".max-size-content").height(),feed_height>feed_max_height)?(this.$(".expand-element-link").removeClass("hidden"),null):void 0},FeedCardView.prototype.expandElement=function(){var set_to_height;return set_to_height=this.$(".max-size-content").prop("scrollHeight"),this.$(".max-size-content").css({"max-height":"200em",height:set_to_height+"px","margin-bottom":"18px"}),this.$(".hidden-expand-element").addClass("hidden")},FeedCardView.prototype.getCardStyleClass=function(card_type){var pattern,ref,regex,style_class;if(null!=this.classMap[card_type])return this.classMap[card_type];ref=this.classMapPatterns;for(pattern in ref)if(style_class=ref[pattern],regex=new RegExp(pattern),regex.test(card_type))return style_class;return""},FeedCardView.prototype.renderView=function(){var _model,cardType,render_view;return this._template?(_model=this.model.toJSON(),cardType=_model.card_type.split("/")[0],this.$feedMenuList.find("[data-target='"+cardType+"']").removeClass("hidden"),render_view=function(_this){return function(){var c,i,len,ref,sub_view;if(_this.$el.html(_this._template({model:_model,user_avatar:_this.profile.get("avatar"),styleClass:_this.getCardStyleClass(_model.card_type)})),_model.cta)for(ref=_model.cta,i=0,len=ref.length;len>i;i++)c=ref[i],("view"===c.type||"support_view"===c.type)&&(sub_view=new HR[c.view+"View"](c.data),_this.$el.find("."+c.view+"-block").html(sub_view.render().el),_this.add_subview(sub_view));return window.setTimeout(_this.setExpandElements,200)}}(this),HR.requires(["MathJax/MathJax"],function(){return render_view()})):void 0},FeedCardView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.FeedCardView=FeedCardView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FeedRightPaneView,HR,ref;return FeedRightPaneView=function(superClass){function FeedRightPaneView(){return FeedRightPaneView.__super__.constructor.apply(this,arguments)}return extend(FeedRightPaneView,superClass),FeedRightPaneView.prototype.template="feed/feed-right-pane",FeedRightPaneView.prototype.events={"click .skip-level-button":"skipLevel","click a.track-click":"trackClick","click .show-demo":"startAlphaOnboardingDemo"},FeedRightPaneView.prototype.initialize=function(options){var that;return this.profile=options.profile,this.model=new HR.FeedRightPaneModel,that=this,this.parent=options.parent,this.model.fetch({success:function(){return that.render()}})},FeedRightPaneView.prototype.render=function(){return this.profile.isLoggedIn()?(this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this):this},FeedRightPaneView.prototype.renderView=function(){return this._template?($(this.el).html(this._template({model:this.model.toJSON(),challengesRemainingString:this.challengesRemainingString,progress_spinner:HR.appController.viewLoader()})),this.showAlphaOnboardingDemo(),this.tooltipAboveSidebar||(this.tooltipAboveSidebar=new HR.RewardsToolTipView({slug:"above-sidebar",showAnchorText:!1,showOnLeft:!0,message:"Solve one challenge in each topic to unlock harder challenges in the next level"})),this.assign({".tooltip-above-sidebar":this.tooltipAboveSidebar}),this.surveyrightpane||(this.surveyrightpane=new HR.SurveyRightPaneView({profile:this.profile,rewardsEnabled:!0}),this.add_subview(this.surveyrightpane)),this.assign({".survey-class":this.surveyrightpane})):void 0},FeedRightPaneView.prototype.trackClick=function(e){var data,elem;return elem=this.$(e.currentTarget),data={},data.category="RightRail",elem.data("trackChapter")&&(data.Chapter=elem.data("trackChapter")),elem.data("trackChallenge")&&(data.Challenge=elem.data("trackChallenge")),elem.data("trackLb")&&(data.LevelBand=elem.data("trackLb")),data.CurrentLevel=this.model.get("hacker_level"),hr_metrics.externalService("track",elem.data("trackEvent"),data)},FeedRightPaneView.prototype.challengesRemainingString=function(chapter_progress){var chapter_link;switch(chapter_link="/domains/"+chapter_progress.track_slug+"/"+chapter_progress.chapter_slug,chapter_progress.challenges_left){case 0:return"";case 1:return'<p><a href="'+chapter_link+'">1 challenge</a> remains</p>';default:return'<p><a href="'+chapter_link+'">'+chapter_progress.challenges_left+" challenges</a> remain</p>"}},FeedRightPaneView.prototype.skipLevel=function(e){var $btn,$card_creation_progress_el,$card_creation_progress_para_el,$progress_spinner_el,$skip_to_level_el,target_level,that;return e.preventDefault(),$btn=$(e.currentTarget),(target_level=$btn.data("target-level"))?(that=this,$skip_to_level_el=this.$(".skip-to-level"),$skip_to_level_el.hide(),$card_creation_progress_el=this.$(".card-creation-progress"),$card_creation_progress_el.show(),$progress_spinner_el=this.$(".progress-spinner"),$progress_spinner_el.show(),$card_creation_progress_para_el=this.$(".card-creation-progress p"),this.model.createLevelSkipCards({target_level:target_level,badge_slug:"algorithms"},function(){return that.parent.render(),$progress_spinner_el.hide(),$card_creation_progress_para_el.html("The challenges needed for skipping are visible in your feed now."),setTimeout(function(){return $card_creation_progress_para_el.html(""),$card_creation_progress_el.hide(),$skip_to_level_el.show()},5e3)})):void 0},FeedRightPaneView.prototype.showAlphaOnboardingDemo=function(){return null==this.profile.get("rewards_alpha_onboarding_done")?this.startAlphaOnboardingDemo():void 0},FeedRightPaneView.prototype.startAlphaOnboardingDemo=function(){var $challenge_elem,challenge_elem_selector,final_callback,intro_js,steps,that;if(!this.onboarding_demo_started)return that=this,$challenge_elem=$(".feed-group .feed-id .feed.feed__challenge").parent()[0],$challenge_elem&&null!=that.model.get("hacker_level")?(challenge_elem_selector=".feed-group #"+$challenge_elem.id,this.onboarding_demo_started=!0,steps=[{intro:"<div class='clearfix msB'> <h4 class='pull-right'> Introducing Hacker IQ </h4> </div> <p> "+this.model.get("hacker_level")+" is a smooth start towards Level 100! </p>",position:"left",element:".right-pane-view-badge-image",tooltipClass:"rewards-intro-step1-tooltip"},{intro:"<div class='clearfix msB'> <h4 class='pull-right'> Improve your Hacker IQ </h4> </div> <h6> Next milestone - Level "+this.model.get("next_level")+" </h6> <p> Solve one challenge each from these topics and unlock harder challenges at Level "+this.model.get("next_level")+" </p>",position:"left",element:".progress-split",tooltipClass:"rewards-intro-step2-tooltip"},{intro:"<div class='msB'><h4> Your Progress </h4></div> <p> Use this secret weapon to plan your strategy. </p> <p> (Psst, get a sneak peek at locked challenges in advanced levels) </p>",position:"bottom",element:"#myprogress-nav-link",tooltipClass:"rewards-intro-step3-tooltip",highlightClass:"rewards-intro-step3-highlight"},{intro:"<div class= 'msB'><h4> Solve your first challenge </h4></div> <p> Your feed will show you the most valuable recommendations to improve your level. Lookout for interesting quizzes and tutorials every now and then. Now let's earn your first points. </p>",position:"right",element:challenge_elem_selector,tooltipClass:"rewards-intro-step4-tooltip",highlightClass:"rewards-intro-step4-highlight"}],intro_js=introJs(),intro_js.setOptions({showStepNumbers:!1,showBullets:!1,showProgress:!1,exitOnOverlayClick:!1,disableInteraction:!0,doneLabel:"Alright, let's do it!",nextLabel:"Continue",steps:steps}),intro_js=intro_js.onchange(function(target_elem){var $target_elem,old_time,step_value;return $target_elem=$(target_elem),old_time=that.onboarding_last_step_time,that.onboarding_last_step_time=(new Date).getTime(),step_value=void 0,$target_elem.hasClass("progress-split")?step_value="Step1":"myprogress-nav-link"===$target_elem.attr("id")?step_value="Step2":$target_elem.hasClass("feed-id")&&(step_value="Step3"),step_value?hr_metrics.track("Click","AlphaOnboardingContinueButton",{attribute1:step_value,attribute7:parseInt((that.onboarding_last_step_time-old_time)/1e3)}):void 0}),final_callback=function(){return $("body").removeClass("rewards-onboarding-demo-body"),that.onboarding_demo_started=null,null==that.profile.get("rewards_alpha_onboarding_done")?(that.profile.set("rewards_alpha_onboarding_done",!0),that.profile.save()):void 0},intro_js=intro_js.onexit(final_callback),intro_js=intro_js.oncomplete(function(){var old_time;return final_callback(),old_time=that.onboarding_last_step_time,that.onboarding_last_step_time=(new Date).getTime(),hr_metrics.track("Click","AlphaOnboardingContinueButton",{attribute1:"Step4",attribute7:parseInt((that.onboarding_last_step_time-old_time)/1e3)})}),setTimeout(function(){return $(challenge_elem_selector).length>0?($("body").addClass("rewards-onboarding-demo-body"),that.onboarding_last_step_time=(new Date).getTime(),intro_js.start()):void 0},500)):(setTimeout(function(){return that.showAlphaOnboardingDemo()},1e3),void 0)},FeedRightPaneView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.FeedRightPaneView=FeedRightPaneView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};jQuery(function(){var FeedsView,HR,ref;return FeedsView=function(superClass){function FeedsView(){return FeedsView.__super__.constructor.apply(this,arguments)}return extend(FeedsView,superClass),FeedsView.prototype.template="feed/feeds",FeedsView.prototype.initialize=function(){return this.profile=HR.profile(),this.profile.isLoggedIn()?(this.collection=HR.collection("feed"),this.loadMorelimit=2,this.intialLimit=10,this.menu_list_class="",this.currentFilter="all",this.known_total=0,this.offset_hash={all:0},this.viewedFeeds=[],$(window).on("scroll.FeedPage",_.bind(this.listenToScrollEvent,this)),this.listenTo(this.collection,"add",this.renderNew),this.trackInterval=setInterval(function(_this){return function(){var i,len,model,ref,ref1,results;if(null!=(ref=_this.collection.models)?ref.length:void 0){for(ref1=_this.collection.models,results=[],i=0,len=ref1.length;len>i;i++)model=ref1[i],results.push(_this.trackCardView(model));return results}}}(this),1e3),hr_metrics.externalService("track","ViewFeedPage",{hacker_id:this.profile.id}),$("#wrapper").css("background-color","#f8f9fa"),hr_metrics.track("HF-View","FeedPage"),this.rewards_ab_test_enabled=HR.ABTest.is_variant("rewards-system","treatment")):void 0},FeedsView.prototype.events={"click .show-demo":"startAlphaDemo","click .js-load-more":"loadMore","click .feed-menu li":"filterCards"},FeedsView.prototype.isInViewport=function(elem,section){var $elem,$window,docViewBottom,docViewTop,elemBottom,elemTop;return null==section&&(section=1),$elem=this.$(elem),$elem.length<1?!1:($window=$(window),docViewTop=$window.scrollTop(),docViewBottom=docViewTop+$window.height()/section,elemTop=$elem.offset().top,elemBottom=elemTop+$elem.height(),docViewBottom>=elemTop&&elemBottom>=docViewTop)},FeedsView.prototype.listenToScrollEvent=function(){var $window;return this.$feed_menu||(this.$feed_menu=this.$(".feed-menu")),$(window).scrollTop()>$(".page-header").outerHeight()?this.$feed_menu.css("top","1%"):this.$feed_menu.css("top","116px"),$window=$(window),$window.scroll(function(_this){return function(){return $window.scrollTop()>$(".page-header").outerHeight()?_this.$(".feed-menu").css("top","1%"):_this.$(".feed-menu").css("top","116px")}}(this))},FeedsView.prototype.filterCards=function(e){var $currentTarget,filterText;return $currentTarget=$(e.currentTarget),filterText=$currentTarget.html(),this.$(".js-no-cards").html("No more cards available for "+filterText),this.$(".js-no-cards").addClass("hidden"),"hidden"===this.menu_list_class&&"ChallengeFeed"===$currentTarget.data("target")?this.$(".feed-container .heading").html("Next Challenges To Solve"):this.$(".feed-container .heading").html(filterText.toUpperCase()),this.trackMenuClicks($currentTarget.data("target")),this.currentFilter=$currentTarget.data("target"),this.$(".js-load-more").attr("data-card-type",this.currentFilter),this.reRender(),this.$(".feed-menu li.active").removeClass("active"),$currentTarget.addClass("active"),this.$(".js-load-more").show(),this.$(".intro-text").hide()},FeedsView.prototype.setFeedViewedFlag=function(){var date,expire_date;return date=new Date,expire_date=date.setTime(date.getTime()+3e5),$.cookie("show_feed_onboarding_intro_"+this.profile.id,!0,{expires:expire_date,path:"/"}),this.profile.set("has_viewed_feed_page",!0),this.profile.save()},FeedsView.prototype.render=function(){return this.profile.isLoggedIn()?(this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this):this},FeedsView.prototype.loadMore=function(e){return this.$(".js-load-more").hide(),null!=e&&this.trackLoadMoreClicks(this.currentFilter),this.initial_collection_length=this.collection.models.length,this.collection.fetch({remove:!1,merge:!0,data:$.param({offset:null!=this.offset_hash[this.currentFilter]?this.offset_hash[this.currentFilter]:this.offset_hash.all,limit:this.loadMorelimit,known_total:this.known_total,filter:this.currentFilter}),success:function(_this){return function(collection,response){var key,ref,val;if("all"===_this.currentFilter){ref=_this.offset_hash;for(key in ref)val=ref[key],_this.offset_hash[key]=response.next_offset}else _this.offset_hash[_this.currentFilter]=response.next_offset;return _this.$(".js-load-more").show(),response.models.length<1?(_this.$(".js-load-more").hide(),_this.$(".feed:visible").length<1&&_this.$(".js-no-cards").removeClass("hidden"),void 0):_this.initial_collection_length===_this.collection.models.length?_this.loadMore():void 0}}(this)})},FeedsView.prototype.filterForCardType=function(card_type){return"ChallengeFeed"===card_type?"ChallengeFeed:ArticleFeed:McqFeed:ProgressFeed":card_type},FeedsView.prototype.fetchFeeds=function(){return this.collection.setHackerId(this.profile.id),this.collection.fetch({data:$.param({offset:0,limit:this.intialLimit}),success:function(_this){return function(collection,response){return 1===response.feed_generation_in_progress&&_this.$(".feed-gen-msg").removeClass("hidden"),collection.models.length<=0?setTimeout(function(){return _this.fetchFeeds()},200):(_this.$(".feed-gen-msg").addClass("hidden"),_this.$(".loader-gif").addClass("hidden"),_this.$(".feed-wrapper").removeClass("hidden"),_this.offset_hash.all=response.next_offset,_this.known_total=response.known_total)}}(this)})},FeedsView.prototype.renderView=function(){return this._template&&(this.profile.get("has_viewed_feed_page")!==!0&&(this.menu_list_class="hidden",setTimeout(function(_this){return function(){return _this.setFeedViewedFlag()
}}(this),1e3)),$(this.el).html(this._template({menu_list_class:this.menu_list_class,display_name:this.profile.displayName(),rewards_ab_test_enabled:this.rewards_ab_test_enabled})),this.profile.isLoggedIn())?(this.fetchFeeds(),this.renderRightPaneView()):void 0},FeedsView.prototype.eligible=function(type){return"ChallengeFeed"===this.currentFilter?type.indexOf("McqFeed")>-1?!0:type.indexOf("ArticleFeed")>-1?!0:type.indexOf(this.currentFilter)>-1:type.indexOf(this.currentFilter)>-1},FeedsView.prototype.reRender=function(){var card_count,i,len,ref,ref1,subView;for(card_count=0,ref=this._subviews,i=0,len=ref.length;len>i;i++)subView=ref[i],null!=(null!=(ref1=subView.model)?ref1.get("card_type"):void 0)&&("all"===this.currentFilter||this.eligible(subView.model.get("card_type"))?(subView.$el.show(),card_count+=1):subView.$el.hide());return 2>=card_count?this.loadMore():void 0},FeedsView.prototype.renderNew=function(newFeed){var sub_view;return this.collection.sync_status?(sub_view=new HR.FeedCardView({model:newFeed,profile:this.profile,id:"feed-"+newFeed.get("feed_id"),className:"feed-id",$feedMenuList:this.$(".feed-menu ul")}),this.add_subview(sub_view),null!=newFeed.get("card_type")&&("all"===this.currentFilter||newFeed.get("card_type").indexOf(this.currentFilter)>-1)&&(this.$el.find(".feed-group .load-previous-feed").before(sub_view.render().el),setTimeout(function(_this){return function(){return _this.trackCardView(newFeed)}}(this),100)),this):this},FeedsView.prototype.startAlphaDemo=function(){return this.rewards_ab_test_enabled&&this.right_pane_view?this.right_pane_view.startAlphaOnboardingDemo():void 0},FeedsView.prototype.renderRightPaneView=function(){return this.rewards_ab_test_enabled?(this.right_pane_view||(this.right_pane_view=new HR.FeedRightPaneView({profile:this.profile,parent:this}),this.add_subview(this.right_pane_view)),this.assign({"#feed-right-pane-container":this.right_pane_view})):(this.surveyrightpane||(this.surveyrightpane=new HR.SurveyRightPaneView({profile:this.profile,rewardsEnabled:!1}),this.add_subview(this.surveyrightpane)),this.assign({"#feed-right-pane-container":this.surveyrightpane}))},FeedsView.prototype.trackMenuClicks=function(item){return hr_metrics.externalService("track","MenuListClickedOnFeedPage",{menu_item:item,hacker_id:this.profile.id}),hr_metrics.track("HF-Click","MenuList",{attribute1:item})},FeedsView.prototype.trackLoadMoreClicks=function(cardType){return hr_metrics.externalService("track","LoadMoreOnFeedPage",{card_type:cardType,hacker_id:this.profile.id}),hr_metrics.track("HF-Click","LoadMore",{attribute1:cardType})},FeedsView.prototype.trackCardView=function(model){var card_type,ref;if(!(null!=this.tracking_card_view&&(this.tracking_card_view=!0)||(this.tracking_card_view=!0,ref=model.get("feed_id"),indexOf.call(this.viewedFeeds,ref)>=0)))return this.isInViewport("#feed-"+model.get("feed_id"))&&(this.viewedFeeds.push(model.get("feed_id")),card_type=model.get("card_type").split("/"),hr_metrics.externalService("track","ViewFeedCard",{card_type:card_type[0],card_sub_type:card_type[1],reason:model.get("reason"),hacker_id:this.profile.id,feed_id:model.get("feed_id")}),hr_metrics.track("HF-View","FeedCard",{attribute1:card_type[0],attribute2:card_type[1],attribute3:model.get("reason").substring(0,255),attribute7:model.get("feed_id")})),this.tracking_card_view=!1},FeedsView.prototype.remove=function(){return $(window).off("scroll.FeedPage"),clearInterval(this.trackInterval),$("#wrapper").css("background-color",""),FeedsView.__super__.remove.call(this)},FeedsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.FeedsView=FeedsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,MakeFullScreenButtonView,ref;return MakeFullScreenButtonView=function(superClass){function MakeFullScreenButtonView(){return MakeFullScreenButtonView.__super__.constructor.apply(this,arguments)}return extend(MakeFullScreenButtonView,superClass),MakeFullScreenButtonView.prototype.tagName="span",MakeFullScreenButtonView.prototype.initialize=function(options){var that;return this.challenge_slug=options.challenge_slug,this.contest_slug=options.contest_slug,this.challengeModelAndViewsLoaded=!1,this.solveChClicked=!1,this.profile=HR.profile(),that=this,this.contest=HR.model("contest"),this.contest.set("slug",this.contest_slug),this.contest.fetch({cached:!0}),this.challengeModel=HR.model("challenge"),this.challengeModel.set({slug:this.challenge_slug,contest_slug:this.contest_slug}),this.challengeModel.fetch({cached:!0,data:$.param({no_tracking:1}),success:function(model){return HR.requires(["compound/challenge-views"],function(){return that.challengeTemplateView=new HR.ChallengeTemplateView({model:model,contest:that.contest,challengeModel:model,feedFullScreenMode:!0}),that.challengeTemplateView.render(),that.add_subview(this.challengeTemplateView),that.challengeModelAndViewsLoaded=!0,that.solveChClicked?that.solveChFullScreen():void 0})}})},MakeFullScreenButtonView.prototype.events={"click .js-solve-ch":"solveChButtonClicked"},MakeFullScreenButtonView.prototype.solveChButtonClicked=function(){var $solveChButton;return this.solveChClicked=!0,$solveChButton=this.$(".js-solve-ch"),$solveChButton.html("loading..."),$solveChButton.attr("disabled","disabled"),this.challengeModelAndViewsLoaded?this.solveChFullScreen():void 0},MakeFullScreenButtonView.prototype.solveChFullScreen=function(){return this.challengeTemplateView.request_view.codeeditor.makeFullscreen(),$.post(this.challengeModel.url().replace("?","")+"/track_viewed_data"),this.profile.get("has_seen_ch_full_screen_intro")!==!0&&this.showIntro(),this.resetButton()},MakeFullScreenButtonView.prototype.showIntro=function(){var steps;return null==this.introjs&&(this.introjs=introJs()),steps=[{element:".restorefullscreen i",intro:"Click here to restore.",position:"left"}],this.introjs.setOptions({showStepNumbers:!1,showBullets:!1,showButtons:!1,steps:steps}),setTimeout(function(_this){return function(){return $("#wrapper #navigation").hide(),_this.introjs.start(),$(".introjs-tooltipReferenceLayer, .introjs-showElement").click(function(){return _this.introjs.exit(),$("#wrapper #navigation").show()}),_this.introjs.onexit(function(){return $("#wrapper #navigation").show()}),_this.profile.set("has_seen_ch_full_screen_intro",!0),_this.profile.save()}}(this),500)},MakeFullScreenButtonView.prototype.resetButton=function(){return this.$(".js-solve-ch").html("Solve Challenge"),this.$(".js-solve-ch").removeAttr("disabled")},MakeFullScreenButtonView.prototype.render=function(){var html;return html="<a class='btn btn-primary js-solve-ch btn-flat'\ndata-track-target='cta1' data-track-value='solve_challenge_full_screen'>\nSolve Challenge</a>",this.$el.html(html),this},MakeFullScreenButtonView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.MakeFullScreenButtonView=MakeFullScreenButtonView})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,McqFeedOptionsView,ref;return McqFeedOptionsView=function(superClass){function McqFeedOptionsView(){return this.expandContainer=bind(this.expandContainer,this),this.expandPrimaryText=bind(this.expandPrimaryText,this),this.expandQuestion=bind(this.expandQuestion,this),this.setExpandElements=bind(this.setExpandElements,this),McqFeedOptionsView.__super__.constructor.apply(this,arguments)}return extend(McqFeedOptionsView,superClass),McqFeedOptionsView.prototype.template="feed/mcqfeedoptions",McqFeedOptionsView.prototype.initialize=function(options){return this.categories=options.categories,this.model=new HR.ChallengeModel(options.model),this.contest_id=options.contest_id,this.id=this.model.id},McqFeedOptionsView.prototype.events=function(){return{"click .answer-icon":"startSubmission",submitAnswer:"submitAnswer","click .expand-text":"expandQuestion","click .expand-feed":"expandFeed"}},McqFeedOptionsView.prototype.startSubmission=function(e){var checkbox;return e.preventDefault(),checkbox=$(e.target),checkbox.hasClass("inactive")||this.model.answer?void 0:checkbox.hasClass("circle-fill")?(clearInterval(this.interval),this.$(".qod-timer").addClass("hidden"),checkbox.removeClass("circle-fill").addClass("circle-empty"),void 0):(clearInterval(this.interval),this._checkbox=checkbox,this._answer=checkbox.data("aid"),this.$(".answer-icon").removeClass("circle-fill").addClass("circle-empty"),this._checkbox.removeClass("circle-empty").addClass("circle-fill"),this.startTimer(),hr_metrics.track("McqSubmissionStarted","",{attribute1:this.model.id,attribute2:this._answer}))},McqFeedOptionsView.prototype.startTimer=function(){return this.$(".qod-timer").removeClass("hidden"),this.max_width=this.$(".qod-timer").width(),this.progressTimer()},McqFeedOptionsView.prototype.progressTimer=function(){var current_width,func,that;return this.$(".qod-progress div").width(0),current_width=0,that=this,func=function(){return current_width+=1,that.$(".qod-progress div").width(current_width),current_width>=100?that.clearTimer():void 0},this.interval=setInterval(func,30)},McqFeedOptionsView.prototype.clearTimer=function(){return $(this.el).trigger("submitAnswer"),clearInterval(this.interval)},McqFeedOptionsView.prototype.submitAnswer=function(){var success_callback;return this.$(".answer-icon").addClass("inactive"),success_callback=function(_this){return function(response){return _this.questionSolved(response)}}(this),this.model.submitMcq(this._answer,this.contest_id,success_callback)},McqFeedOptionsView.prototype.questionSolved=function(response){return this.$(".answer-icon").removeClass("circle-empty"),response.status?(response.model.solved?this._checkbox.removeClass("circle-fill").addClass("icon-ok"):(this._checkbox.removeClass("circle-fill").addClass("icon-cancel-large"),this.$(".answer-icon[data-aid='"+response.correct_answer+"']").removeClass("circle-empty").addClass("icon-ok")),this.$(".qod-timer").addClass("hidden")):void 0},McqFeedOptionsView.prototype.setExpandElements=function(){var feed_height,feed_max_height,question_height,question_max_height;return feed_height=this.$(".fixed-height-qod-container").prop("scrollHeight"),feed_max_height=this.$(".fixed-height-qod-container").height(),feed_height>feed_max_height?(this.$(".expand-feed").removeClass("hidden"),this.$(".more-options-teaser").removeClass("hidden"),null):(question_height=this.$(".primary-text").prop("scrollHeight"),question_max_height=this.$(".primary-text").height(),question_height>question_max_height?(this.$(".expand-text").removeClass("hidden"),this.$(".hidden-expand-element").removeClass("hidden")):void 0)},McqFeedOptionsView.prototype.expandQuestion=function(){return this.expandPrimaryText(),window.setTimeout(this.expandContainer)},McqFeedOptionsView.prototype.expandFeed=function(){return this.expandContainer(),window.setTimeout(this.expandQuestion)},McqFeedOptionsView.prototype.expandPrimaryText=function(){var set_to_height;return set_to_height=this.$(".primary-text").prop("scrollHeight"),this.$(".primary-text").css({"max-height":"200em",height:set_to_height+"px"}),this.$(".expand-text").addClass("hidden"),this.$(".hidden-expand-element").addClass("hidden")},McqFeedOptionsView.prototype.expandContainer=function(){var set_to_height;return set_to_height=this.$(".fixed-height-qod-container").prop("scrollHeight"),this.$(".fixed-height-qod-container").css({"max-height":"200em",height:set_to_height+"px"}),this.$(".expand-feed").addClass("hidden"),this.$(".more-options-teaser").remove()},McqFeedOptionsView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),categories:this.categories,id:this.model.id})),this.$el.find("img").on("load",this.setExpandElements),window.setTimeout(this.setExpandElements,200),this},McqFeedOptionsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.McqFeedOptionsView=McqFeedOptionsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,PostVoteAndCommentView,ref;return PostVoteAndCommentView=function(superClass){function PostVoteAndCommentView(){return PostVoteAndCommentView.__super__.constructor.apply(this,arguments)}return extend(PostVoteAndCommentView,superClass),PostVoteAndCommentView.prototype.tagName="span",PostVoteAndCommentView.prototype.template="feed/post-vote-comment",PostVoteAndCommentView.prototype.initialize=function(options){return this.votes=options.votes,this.comments=options.comments,this.post_id=options.post_id,this.vote_status=options.vote_status,this._votes_synced=!0,this._comment_box_closed=!0},PostVoteAndCommentView.prototype.events={"click .js-toggle-vote":"toggleVote","click .js-toggle-comment":"toggleCommentBox"},PostVoteAndCommentView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},PostVoteAndCommentView.prototype.renderView=function(){return this._template?this.$el.html(this._template({votes:this.votes,comments:this.comments,vote_status:this.vote_status})):void 0},PostVoteAndCommentView.prototype.toggleCommentBox=function(){return this.$outer_feed_box||(this.$outer_feed_box=this.$el.closest(".feed-id")),this.$comment_box||(this.$comment_box=this.$outer_feed_box.find(".post-comment-box")),this._comment_box_closed?(this.$comment_box.find("textarea").on("keydown.PostComment-"+this.cid,_.bind(this.commentChanged,this)),this.$outer_feed_box.css({"background-color":"#c2c7d0"}),this.$comment_box.slideDown(),this._comment_box_closed=!1):(this.$comment_box.find("textarea").off("keydown.PostComment-"+this.cid),this.$outer_feed_box.css({"background-color":"transparent"}),this.$comment_box.slideUp(),this._comment_box_closed=!0)},PostVoteAndCommentView.prototype.commentChanged=function(e){return 13!==e.keyCode||e.shiftKey?void 0:(e.preventDefault(),$(e.currentTarget).blur(),this.addComment())},PostVoteAndCommentView.prototype.addComment=function(){var that;return this.$outer_feed_box||(this.$outer_feed_box=this.$el.closest(".feed-id")),this.$comment_box||(this.$comment_box=this.$outer_feed_box.find(".post-comment-box")),this.newCommentModel=new HR.PostCommentModel,this.newCommentModel.setPostId(this.post_id),this.newCommentModel.set("description",this.$comment_box.find("textarea").val()),this.newCommentModel.set("parent_id",null),this.newCommentModel.justAdded=!0,that=this,this.newCommentModel.save(null,{success:function(_this){return function(){return _this.comments+=1,_this.$el.find(".commentCount").html(that.comments),_this.toggleCommentBox()}}(this)})},PostVoteAndCommentView.prototype.toggleVote=function(){return this._votes_synced?(this._votes_synced=!1,$.ajax({type:"PUT",url:"/rest/posts/"+this.post_id+"/upvote",success:function(_this){return function(resp){return resp.status&&(_this.vote_status?(_this.votes-=1,_this.vote_status=!1,$(_this.el).find("i.vote").css("color","#979faf")):(_this.votes+=1,_this.vote_status=!0,$(_this.el).find("i.vote").css("color","#0076b9")),$(_this.el).find(".voteCount").html(_this.votes)),_this._votes_synced=!0}}(this)})):void 0},PostVoteAndCommentView.prototype.remove=function(){return this.$comment_box&&this.$comment_box.find("textarea").off("keydown.PostComment-"+this.cid),PostVoteAndCommentView.__super__.remove.call(this)},PostVoteAndCommentView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.PostVoteAndCommentView=PostVoteAndCommentView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SurveyRightPaneView,ref;return SurveyRightPaneView=function(superClass){function SurveyRightPaneView(){return SurveyRightPaneView.__super__.constructor.apply(this,arguments)}return extend(SurveyRightPaneView,superClass),SurveyRightPaneView.prototype.template="survey-right-pane",SurveyRightPaneView.prototype.events={"click input[name='survey_name']":"saveSurvey"},SurveyRightPaneView.prototype.initialize=function(options){var that;return this.profile=options.profile,this.survey=new HR.SurveyNextModel,this.rewardsEnabled=options.rewardsEnabled,that=this,this.survey.fetch({success:function(){return that.showSurvey()}})},SurveyRightPaneView.prototype.render=function(){return this.profile.isLoggedIn()?(this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this):this},SurveyRightPaneView.prototype.showSurvey=function(){return this.survey.status?this.render():this.rewardsEnabled?void 0:$(".rewards-enabled").removeClass("rewards-enabled")},SurveyRightPaneView.prototype.saveSurvey=function(){var hacker_id,model,survey_slug;return survey_slug=this.survey.get("slug"),this.$('input[name="survey_name"]:checked').val()?(hacker_id=this.profile.id,model=new HR.HackerSurveyModel({hacker_id:hacker_id,survey_id:this.survey.get("id"),answer:this.$('input[name="survey_name"]:checked').val()}),model.save(null,{success:function(){return setTimeout(function(_this){return function(){return _this.$(".after-survey-data").removeClass("hide"),_this.$(".survey-data").addClass("hide"),setTimeout(function(){return _this.$(".survey").addClass("hide")},4e3)}}(this),1e3)}})):void 0},SurveyRightPaneView.prototype.renderView=function(){return this._template&&this.survey.status?this.$el.html(this._template({survey:this.survey,options:this.shuffle(this.survey.get("options")),rewardsEnabled:this.rewardsEnabled})):void 0},SurveyRightPaneView.prototype.shuffle=function(array){var currentIndex,randomIndex,temporaryValue;for(currentIndex=array.length;0!==currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),currentIndex-=1,temporaryValue=array[currentIndex],array[currentIndex]=array[randomIndex],array[randomIndex]=temporaryValue;return array},SurveyRightPaneView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SurveyRightPaneView=SurveyRightPaneView})}.call(this);